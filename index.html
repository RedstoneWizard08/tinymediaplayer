<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Tiny Media Player</title><script type="module" crossorigin>!function(){const o=document.createElement("link").relList;if(!(o&&o.supports&&o.supports("modulepreload"))){for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver((o=>{for(const K of o)if("childList"===K.type)for(const o of K.addedNodes)"LINK"===o.tagName&&"modulepreload"===o.rel&&i(o)})).observe(document,{childList:!0,subtree:!0})}function i(o){if(o.ep)return;o.ep=!0;const i=function(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),"use-credentials"===o.crossOrigin?i.credentials="include":"anonymous"===o.crossOrigin?i.credentials="omit":i.credentials="same-origin",i}(o);fetch(o.href,i)}}();const o=(o,i,K=[],e={},t)=>{const A=document.createElement(o);A.id=i,A.className=K.join(" ");for(const r of Object.keys(e))A.setAttribute(r,e[r]);return t&&(A.innerHTML=t),A},i=(o,...i)=>{for(const K of i)o.appendChild(K)},{fileIn:K,status:e,result:t,coverArt:A,play:r,position:n,progress:a,progressInner:g,remaining:s,next:u}=(()=>{const K=o("input","filein",[],{type:"file",multiple:!0,accept:"audio/*",placeholder:"Choose your music..."}),e=o("div","status",["status"],{},"Waiting..."),t=o("audio","result"),A=o("img","coverArt",[],{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gOTkK/9sAQwABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgEBAgEBAQICAgICAgICAgECAgICAgICAgIC/9sAQwEBAQEBAQEBAQEBAgEBAQICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC/8AAEQgDAAQAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/wA/+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//Z"}),r=o("div","control",["control"]),n=o("p","play",["controller"],{},"Play"),a=o("p","_sp0",[],{},"&nbsp;&nbsp;&nbsp;"),g=o("p","pos",["time"],{},"00:00"),s=o("div","progress"),u=o("div","progressInner"),c=o("p","rem",["time"],{},"-00:00"),C=o("p","_sp1",[],{},"&nbsp;&nbsp;&nbsp;"),l=o("p","next",["controller"],{},"&gt;&gt;");return i(s,u),i(r,n,a,g,s,c,C,l),i(document.body,K,e,t,A,r),{fileIn:K,status:e,result:t,coverArt:A,controls:r,play:n,sp0:a,position:g,progress:s,progressInner:u,remaining:c,sp1:C,next:l}})();var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function C(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var l,f,d={exports:{}};l=d,(f=f||{}).scope={},f.ASSUME_ES5=!1,f.ASSUME_NO_NATIVE_MAP=!1,f.ASSUME_NO_NATIVE_SET=!1,f.defineProperty=f.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(o,i,K){o!=Array.prototype&&o!=Object.prototype&&(o[i]=K.value)},f.getGlobal=function(o){return"undefined"!=typeof window&&window===o?o:void 0!==c&&null!=c?c:o},f.global=f.getGlobal(c),f.polyfill=function(o,i,K,e){if(i){for(K=f.global,o=o.split("."),e=0;e<o.length-1;e++){var t=o[e];t in K||(K[t]={}),K=K[t]}(i=i(e=K[o=o[o.length-1]]))!=e&&null!=i&&f.defineProperty(K,o,{configurable:!0,writable:!0,value:i})}},f.polyfill("Object.setPrototypeOf",(function(o){return o||("object"!=typeof"".__proto__?null:function(o,i){if(o.__proto__=i,o.__proto__!==i)throw new TypeError(o+" is not extensible");return o})}),"es6","es5"),f.objectCreate=f.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(o){var i=function(){};return i.prototype=o,new i},f.construct="undefined"!=typeof Reflect&&Reflect.construct||function(o,i,K){return void 0===K&&(K=o),K=f.objectCreate(K.prototype||Object.prototype),Function.prototype.apply.call(o,K,i)||K},f.polyfill("Reflect.construct",(function(o){return o||f.construct}),"es6","es3"),l.exports=function(){function o(i,K,e){function t(r,n){if(!K[r]){if(!i[r]){if(!n&&C)return C(r);if(A)return A(r,!0);throw(n=Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",n}n=K[r]={exports:{}},i[r][0].call(n.exports,(function(o){return t(i[r][1][o]||o)}),n,n.exports,o,i,K,e)}return K[r].exports}for(var A=C,r=0;r<e.length;r++)t(e[r]);return t}return o}()({1:[function(o,i,K){},{}],2:[function(o,i,K){i.exports=XMLHttpRequest},{}],3:[function(o,i,K){function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function t(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function A(o,i,K){return i&&t(o.prototype,i),K&&t(o,K),o}function r(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),i&&n(o,i)}function n(o,i){return(n=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(o,i)}function a(o){var i=s();return function(){var K=u(o);if(i){var t=u(this).constructor;K=Reflect.construct(K,arguments,t)}else K=K.apply(this,arguments);return K=!K||"object"!==e(K)&&"function"!=typeof K?g(this):K}}function g(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function s(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(o){return!1}}function u(o){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function c(o,i,K){return i in o?Object.defineProperty(o,i,{value:K,enumerable:!0,configurable:!0,writable:!0}):o[i]=K,o}o=function(o){function i(o){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");var e=K.call(this);return c(g(e),"_array",void 0),c(g(e),"_size",void 0),e._array=o,e._size=o.length,e._isInitialized=!0,e}r(i,o);var K=a(i);return A(i,[{key:"init",value:function(o){setTimeout(o.onSuccess,0)}},{key:"loadRange",value:function(o,i){setTimeout(i.onSuccess,0)}},{key:"getByteAt",value:function(o){if(o>=this._array.length)throw Error("Offset "+o+" hasn't been loaded yet.");return this._array[o]}}],[{key:"canReadFile",value:function(o){return Array.isArray(o)||"function"==typeof Buffer&&Buffer.isBuffer(o)}}]),i}(o("./MediaFileReader")),i.exports=o},{"./MediaFileReader":11}],4:[function(o,i,K){function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function t(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function A(o,i,K){return i&&t(o.prototype,i),K&&t(o,K),o}function r(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),i&&n(o,i)}function n(o,i){return(n=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(o,i)}function a(o){var i=s();return function(){var K=u(o);if(i){var t=u(this).constructor;K=Reflect.construct(K,arguments,t)}else K=K.apply(this,arguments);return K=!K||"object"!==e(K)&&"function"!=typeof K?g(this):K}}function g(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function s(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(o){return!1}}function u(o){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function c(o,i,K){return i in o?Object.defineProperty(o,i,{value:K,enumerable:!0,configurable:!0,writable:!0}):o[i]=K,o}var C=o("./ChunkedFileData");o=function(o){function i(o){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");var e=K.call(this);return c(g(e),"_blob",void 0),c(g(e),"_fileData",void 0),e._blob=o,e._fileData=new C,e}r(i,o);var K=a(i);return A(i,[{key:"_init",value:function(o){this._size=this._blob.size,setTimeout(o.onSuccess,1)}},{key:"loadRange",value:function(o,i){var K=this,e=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,o[0],o[1]+1),t=new FileReader;t.onloadend=function(e){e=new Uint8Array(t.result),K._fileData.addData(o[0],e),i.onSuccess()},t.onerror=t.onabort=function(o){i.onError&&i.onError({type:"blob",info:t.error})},t.readAsArrayBuffer(e)}},{key:"getByteAt",value:function(o){return this._fileData.getByteAt(o)}}],[{key:"canReadFile",value:function(o){return"undefined"!=typeof Blob&&o instanceof Blob||"undefined"!=typeof File&&o instanceof File}}]),i}(o("./MediaFileReader")),i.exports=o},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(o,i,K){function e(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function t(o,i,K){return i&&e(o.prototype,i),K&&e(o,K),o}o=function(){function o(){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");"_fileData"in this?Object.defineProperty(this,"_fileData",{value:void 0,enumerable:!0,configurable:!0,writable:!0}):this._fileData=void 0,this._fileData=[]}return t(o,[{key:"addData",value:function(o,i){var K=o+i.length-1,e=this._getChunkRange(o,K);if(-1===e.startIx)this._fileData.splice(e.insertIx||0,0,{offset:o,data:i});else{var t=this._fileData[e.startIx],A=this._fileData[e.endIx];K=K<A.offset+A.data.length-1;var r={offset:Math.min(o,t.offset),data:i};o>t.offset&&(o=this._sliceData(t.data,0,o-t.offset),r.data=this._concatData(o,i)),K&&(o=this._sliceData(r.data,0,A.offset-r.offset),r.data=this._concatData(o,A.data)),this._fileData.splice(e.startIx,e.endIx-e.startIx+1,r)}}},{key:"_concatData",value:function(o,i){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o)){var K=new o.constructor(o.length+i.length);return K.set(o,0),K.set(i,o.length),K}return o.concat(i)}},{key:"_sliceData",value:function(o,i,K){return o.slice?o.slice(i,K):o.subarray(i,K)}},{key:"_getChunkRange",value:function(o,i){for(var K,e,t=-1,A=-1,r=0,n=0;n<this._fileData.length&&(K=(e=this._fileData[n].offset)+this._fileData[n].data.length,!(i<e-1));r=++n)if(o<=K+1&&i>=e-1){t=n;break}if(-1===t)return{startIx:-1,endIx:-1,insertIx:r};for(n=t;n<this._fileData.length&&(i>=(e=this._fileData[n].offset)-1&&(A=n),!(i<=(K=e+this._fileData[n].data.length)+1));n++);return-1===A&&(A=t),{startIx:t,endIx:A}}},{key:"hasDataRange",value:function(o,i){for(var K=0;K<this._fileData.length;K++){var e=this._fileData[K];if(i<e.offset)break;if(o>=e.offset&&i<e.offset+e.data.length)return!0}return!1}},{key:"getByteAt",value:function(o){for(var i,K=0;K<this._fileData.length;K++){var e=this._fileData[K].offset,t=e+this._fileData[K].data.length-1;if(o>=e&&o<=t){i=this._fileData[K];break}}if(i)return i.data[o-i.offset];throw Error("Offset "+o+" hasn't been loaded yet.")}}],[{key:"NOT_FOUND",get:function(){return-1}}]),o}(),i.exports=o},{}],6:[function(o,i,K){function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function t(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function A(o,i,K){return i&&t(o.prototype,i),K&&t(o,K),o}function r(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),i&&n(o,i)}function n(o,i){return(n=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(o,i)}function a(o){var i=s();return function(){var K=u(o);if(i){var t=u(this).constructor;K=Reflect.construct(K,arguments,t)}else K=K.apply(this,arguments);return K=!K||"object"!==e(K)&&"function"!=typeof K?g(this):K}}function g(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function s(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(o){return!1}}function u(o){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function c(o,i,K){return i in o?Object.defineProperty(o,i,{value:K,enumerable:!0,configurable:!0,writable:!0}):o[i]=K,o}var C=[4,132],l=[6,134],f="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");o=function(o){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,e=Array(o),t=0;t<o;t++)e[t]=arguments[t];return c(g(o=K.call.apply(K,[this].concat(e))),"_commentOffset",void 0),c(g(o),"_pictureOffset",void 0),o}r(i,o);var K=a(i);return A(i,[{key:"_loadData",value:function(o,i){var K=this;o.loadRange([4,7],{onSuccess:function(){K._loadBlock(o,4,i)}})}},{key:"_loadBlock",value:function(o,i,K){var e=this,t=o.getByteAt(i),A=o.getInteger24At(i+1,!0);if(-1!==C.indexOf(t)){var r=i+4;o.loadRange([r,r+A],{onSuccess:function(){e._commentOffset=r,e._nextBlock(o,i,t,A,K)}})}else-1!==l.indexOf(t)?(r=i+4,o.loadRange([r,r+A],{onSuccess:function(){e._pictureOffset=r,e._nextBlock(o,i,t,A,K)}})):e._nextBlock(o,i,t,A,K)}},{key:"_nextBlock",value:function(o,i,K,e,t){var A=this;127<K?A._commentOffset?t.onSuccess():t.onError({type:"loadData",info:"Comment block could not be found."}):o.loadRange([i+4+e,i+4+4+e],{onSuccess:function(){A._loadBlock(o,i+4+e,t)}})}},{key:"_parseData",value:function(o,i){var K=o.getLongAt(this._commentOffset,!1)+(this._commentOffset+4);i=o.getLongAt(K,!1),K+=4;for(var e,t,A,r,n,a,g=0;g<i;g++){var s=o.getLongAt(K,!1),u=o.getStringWithCharsetAt(K+4,s,"utf-8").toString(),c=u.indexOf("=");switch((u=[u.slice(0,c),u.slice(c+1)])[0].toUpperCase()){case"TITLE":e=u[1];break;case"ARTIST":t=u[1];break;case"ALBUM":A=u[1];break;case"TRACKNUMBER":r=u[1];break;case"GENRE":n=u[1]}K+=4+s}return this._pictureOffset&&(a=o.getLongAt(this._pictureOffset,!0),i=this._pictureOffset+4,K=o.getLongAt(i,!0),g=i+4,i=o.getStringAt(g,K),K=g+K,g=o.getLongAt(K,!0),s=K+4,K=o.getStringWithCharsetAt(s,g,"utf-8").toString(),g=s+g+16,s=o.getLongAt(g,!0),o=o.getBytesAt(g+4,s,!0),a={format:i,type:f[a],description:K,data:o}),{type:"FLAC",version:"1",tags:{title:e,artist:t,album:A,track:r,genre:n,picture:a}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(o){return"fLaC"===String.fromCharCode.apply(String,o.slice(0,4))}}]),i}(o("./MediaTagReader")),i.exports=o},{"./MediaTagReader":12}],7:[function(o,i,K){function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function t(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function A(o,i,K){return i&&t(o.prototype,i),K&&t(o,K),o}function r(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),i&&n(o,i)}function n(o,i){return(n=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(o,i)}function a(o){var i=g();return function(){var K=s(o);if(i){var t=s(this).constructor;K=Reflect.construct(K,arguments,t)}else K=K.apply(this,arguments);if(!K||"object"!==e(K)&&"function"!=typeof K){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");K=this}return K}}function g(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(o){return!1}}function s(o){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}K=o("./MediaTagReader"),o("./MediaFileReader"),o=function(o){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");return K.apply(this,arguments)}r(i,o);var K=a(i);return A(i,[{key:"_loadData",value:function(o,i){var K=o.getSize();o.loadRange([K-128,K-1],i)}},{key:"_parseData",value:function(o,i){var K=o.getSize()-128,e=o.getStringWithCharsetAt(K+3,30).toString(),t=o.getStringWithCharsetAt(K+33,30).toString(),A=o.getStringWithCharsetAt(K+63,30).toString(),r=o.getStringWithCharsetAt(K+93,4).toString(),n=o.getByteAt(K+97+28);if(i=o.getByteAt(K+97+29),0==n&&0!=i){var a="1.1";n=o.getStringWithCharsetAt(K+97,28).toString()}else a="1.0",n=o.getStringWithCharsetAt(K+97,30).toString(),i=0;return o={type:"ID3",version:a,tags:{title:e,artist:t,album:A,year:r,comment:n,genre:255>(o=o.getByteAt(K+97+30))?u[o]:""}},i&&(o.tags.track=i),o}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(o){return"TAG"===String.fromCharCode.apply(String,o.slice(0,3))}}]),i}(K);var u="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");i.exports=o},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(o,i,K){function e(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function t(o,i,K){return i&&e(o.prototype,i),K&&e(o,K),o}function A(o){switch(o){case 0:default:o="iso-8859-1";break;case 1:o="utf-16";break;case 2:o="utf-16be";break;case 3:o="utf-8"}return o}function r(o,i,K,e){var t=K.getStringWithCharsetAt(o+1,i-1,e);return o=K.getStringWithCharsetAt(o+1+t.bytesReadCount,i-1-t.bytesReadCount,e),{user_description:t.toString(),data:o.toString()}}o("./MediaFileReader");var n=o("./StringUtils"),a=o("./ArrayFileReader"),g={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};o=function(){function o(){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function")}return t(o,null,[{key:"getFrameReaderFunction",value:function(o){return o in s?s[o]:"T"===o[0]?s["T*"]:"W"===o[0]?s["W*"]:null}},{key:"readFrames",value:function(i,K,e,t,A){for(var r={},n=this._getFrameHeaderSize(t);i<K-n;){var a=this._readFrameHeader(e,i,t),g=a.id;if(!g)break;var s=a.flags,u=a.size,c=i+a.headerSize,C=e;if(i+=a.headerSize+a.size,!A||-1!==A.indexOf(g)){if("MP3e"===g||"\0MP3"===g||"\0\0MP"===g||" MP3"===g)break;s&&s.format.unsynchronisation&&!t.flags.unsynchronisation&&(C=this.getUnsyncFileReader(C,c,u),c=0,u=C.getSize()),s&&s.format.data_length_indicator&&(c+=4,u-=4),s=(a=o.getFrameReaderFunction(g))?a.apply(this,[c,u,C,s,t]):null,u={id:g,size:u,description:c=this._getFrameDescription(g),data:s},g in r?(r[g].id&&(r[g]=[r[g]]),r[g].push(u)):r[g]=u}}return r}},{key:"_getFrameHeaderSize",value:function(o){return 2==(o=o.major)?6:3==o||4==o?10:0}},{key:"_readFrameHeader",value:function(o,i,K){var e=K.major,t=null;switch(K=this._getFrameHeaderSize(K),e){case 2:var A=o.getStringAt(i,3),r=o.getInteger24At(i+3,!0);break;case 3:A=o.getStringAt(i,4),r=o.getLongAt(i+4,!0);break;case 4:A=o.getStringAt(i,4),r=o.getSynchsafeInteger32At(i+4)}return A!=String.fromCharCode(0,0,0)&&A!=String.fromCharCode(0,0,0,0)||(A=""),A&&2<e&&(t=this._readFrameFlags(o,i+8)),{id:A||"",size:r||0,headerSize:K||0,flags:t}}},{key:"_readFrameFlags",value:function(o,i){return{message:{tag_alter_preservation:o.isBitSetAt(i,6),file_alter_preservation:o.isBitSetAt(i,5),read_only:o.isBitSetAt(i,4)},format:{grouping_identity:o.isBitSetAt(i+1,7),compression:o.isBitSetAt(i+1,3),encryption:o.isBitSetAt(i+1,2),unsynchronisation:o.isBitSetAt(i+1,1),data_length_indicator:o.isBitSetAt(i+1,0)}}}},{key:"_getFrameDescription",value:function(o){return o in g?g[o]:"Unknown"}},{key:"getUnsyncFileReader",value:function(o,i,K){for(o=o.getBytesAt(i,K),i=0;i<o.length-1;i++)255===o[i]&&0===o[i+1]&&o.splice(i+1,1);return new a(o)}}]),o}();var s={APIC:function(o,i,K,e,t){e=o;var r=A(K.getByteAt(o));switch(t&&t.major){case 2:t=K.getStringAt(o+1,3),o+=4;break;case 3:case 4:o+=1+(t=K.getStringWithCharsetAt(o+1,i-1)).bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.")}var n=K.getByteAt(o);return n=u[n],o+=1+(r=K.getStringWithCharsetAt(o+1,i-(o-e)-1,r)).bytesReadCount,{format:t.toString(),type:n,description:r.toString(),data:K.getBytesAt(o,e+i-o)}},CHAP:function(o,i,K,e,t){e=o;var A={},r=n.readNullTerminatedString(K.getBytesAt(o,i));return A.id=r.toString(),o+=r.bytesReadCount,A.startTime=K.getLongAt(o,!0),o+=4,A.endTime=K.getLongAt(o,!0),o+=4,A.startOffset=K.getLongAt(o,!0),o+=4,A.endOffset=K.getLongAt(o,!0),o+=4,A.subFrames=this.readFrames(o,o+(i-(o-e)),K,t),A},CTOC:function(o,i,K,e,t){e=o;var A={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},r=n.readNullTerminatedString(K.getBytesAt(o,i));for(A.id=r.toString(),o+=r.bytesReadCount,A.topLevel=K.isBitSetAt(o,1),A.ordered=K.isBitSetAt(o,0),o++,A.entryCount=K.getByteAt(o),o++,r=0;r<A.entryCount;r++){var a=n.readNullTerminatedString(K.getBytesAt(o,i-(o-e)));A.childElementIds.push(a.toString()),o+=a.bytesReadCount}return A.subFrames=this.readFrames(o,o+(i-(o-e)),K,t),A},COMM:function(o,i,K,e,t){var r=o,n=A(K.getByteAt(o));return e=K.getStringAt(o+1,3),o+=4+(t=K.getStringWithCharsetAt(o+4,i-4,n)).bytesReadCount,o=K.getStringWithCharsetAt(o,r+i-o,n),{language:e,short_description:t.toString(),text:o.toString()}}};s.COM=s.COMM,s.PIC=function(o,i,K,e,t){return s.APIC(o,i,K,e,t)},s.PCNT=function(o,i,K,e,t){return K.getLongAt(o,!1)},s.CNT=s.PCNT,s["T*"]=function(o,i,K,e,t){return e=A(K.getByteAt(o)),K.getStringWithCharsetAt(o+1,i-1,e).toString()},s.TXXX=function(o,i,K,e,t){return e=A(K.getByteAt(o)),r(o,i,K,e)},s.WXXX=function(o,i,K,e,t){return 0===i?null:(e=A(K.getByteAt(o)),r(o,i,K,e))},s["W*"]=function(o,i,K,e,t){return 0===i?null:K.getStringWithCharsetAt(o,i,"iso-8859-1").toString()},s.TCON=function(o,i,K,e){return s["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},s.TCO=s.TCON,s.USLT=function(o,i,K,e,t){var r=o,n=A(K.getByteAt(o));return e=K.getStringAt(o+1,3),o+=4+(t=K.getStringWithCharsetAt(o+4,i-4,n)).bytesReadCount,o=K.getStringWithCharsetAt(o,r+i-o,n),{language:e,descriptor:t.toString(),lyrics:o.toString()}},s.ULT=s.USLT,s.UFID=function(o,i,K,e,t){return o+=(e=n.readNullTerminatedString(K.getBytesAt(o,i))).bytesReadCount,o=K.getBytesAt(o,i-e.bytesReadCount),{ownerIdentifier:e.toString(),identifier:o}};var u="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");i.exports=o},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(o,i,K){function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function t(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function A(o,i,K){return i&&t(o.prototype,i),K&&t(o,K),o}function r(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),i&&n(o,i)}function n(o,i){return(n=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(o,i)}function a(o){var i=g();return function(){var K=s(o);if(i){var t=s(this).constructor;K=Reflect.construct(K,arguments,t)}else K=K.apply(this,arguments);if(!K||"object"!==e(K)&&"function"!=typeof K){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");K=this}return K}}function g(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(o){return!1}}function s(o){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}K=o("./MediaTagReader"),o("./MediaFileReader");var u=o("./ID3v2FrameReader");o=function(o){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");return K.apply(this,arguments)}r(i,o);var K=a(i);return A(i,[{key:"_loadData",value:function(o,i){o.loadRange([6,9],{onSuccess:function(){o.loadRange([0,10+o.getSynchsafeInteger32At(6)-1],i)},onError:i.onError})}},{key:"_parseData",value:function(o,i){var K,e=0,t=o.getByteAt(e+3);if(4<t)return{type:"ID3",version:">2.4",tags:{}};var A=o.getByteAt(e+4),r=o.isBitSetAt(e+5,7),n=o.isBitSetAt(e+5,6),a=o.isBitSetAt(e+5,5),g=o.getSynchsafeInteger32At(e+6);if(e+=10,n)if(4===t){var s=o.getSynchsafeInteger32At(e);e+=s}else e+=(s=o.getLongAt(e,!0))+4;for(var C in s={type:"ID3",version:"2."+t+"."+A,major:t,revision:A,flags:{unsynchronisation:r,extended_header:n,experimental_indicator:a,footer_present:!1},size:g,tags:{}},i&&(K=this._expandShortcutTags(i)),i=g+10,s.flags.unsynchronisation&&(o=u.getUnsyncFileReader(o,e,g),e=0,i=o.getSize()),o=u.readFrames(e,i,o,s,K),c)c.hasOwnProperty(C)&&(K=this._getFrameData(o,c[C]))&&(s.tags[C]=K);for(var l in o)o.hasOwnProperty(l)&&(s.tags[l]=o[l]);return s}},{key:"_getFrameData",value:function(o,i){for(var K,e=0;K=i[e];e++)if(K in o)return(o=o[K]instanceof Array?o[K][0]:o[K]).data}},{key:"getShortcuts",value:function(){return c}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(o){return"ID3"===String.fromCharCode.apply(String,o.slice(0,3))}}]),i}(K);var c={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};i.exports=o},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(o,i,K){function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function t(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function A(o,i,K){return i&&t(o.prototype,i),K&&t(o,K),o}function r(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),i&&n(o,i)}function n(o,i){return(n=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(o,i)}function a(o){var i=g();return function(){var K=s(o);if(i){var t=s(this).constructor;K=Reflect.construct(K,arguments,t)}else K=K.apply(this,arguments);if(!K||"object"!==e(K)&&"function"!=typeof K){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");K=this}return K}}function g(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(o){return!1}}function s(o){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}K=o("./MediaTagReader"),o("./MediaFileReader"),o=function(o){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");return K.apply(this,arguments)}r(i,o);var K=a(i);return A(i,[{key:"_loadData",value:function(o,i){var K=this;o.loadRange([0,16],{onSuccess:function(){K._loadAtom(o,0,"",i)},onError:i.onError})}},{key:"_loadAtom",value:function(o,i,K,e){if(i>=o.getSize())e.onSuccess();else{var t=this,A=o.getLongAt(i,!0);if(0==A||isNaN(A))e.onSuccess();else{var r=o.getStringAt(i+4,4);if(this._isContainerAtom(r)){"meta"==r&&(i+=4);var n=(K?K+".":"")+r;"moov.udta.meta.ilst"===n?o.loadRange([i,i+A],e):o.loadRange([i+8,i+8+8],{onSuccess:function(){t._loadAtom(o,i+8,n,e)},onError:e.onError})}else o.loadRange([i+A,i+A+8],{onSuccess:function(){t._loadAtom(o,i+A,K,e)},onError:e.onError})}}}},{key:"_isContainerAtom",value:function(o){return 0<=["moov","udta","meta","ilst"].indexOf(o)}},{key:"_canReadAtom",value:function(o){return"----"!==o}},{key:"_parseData",value:function(o,i){var K={};for(var e in i=this._expandShortcutTags(i),this._readAtom(K,o,0,o.getSize(),i),C)C.hasOwnProperty(e)&&(i=K[C[e]])&&(K[e]="track"===e?i.data.track:i.data);return{type:"MP4",ftyp:o.getStringAt(8,4),version:o.getLongAt(12,!0),tags:K}}},{key:"_readAtom",value:function(o,i,K,e,t,A,r){r=void 0===r?"":r+"  ";for(var n=K;n<K+e;){var a=i.getLongAt(n,!0);if(0==a)break;var g=i.getStringAt(n+4,4);if(this._isContainerAtom(g)){"meta"==g&&(n+=4),this._readAtom(o,i,n+8,a-8,t,(A?A+".":"")+g,r);break}(!t||0<=t.indexOf(g))&&"moov.udta.meta.ilst"===A&&this._canReadAtom(g)&&(o[g]=this._readMetadataAtom(i,n)),n+=a}}},{key:"_readMetadataAtom",value:function(o,i){var K=o.getLongAt(i,!0),e=o.getStringAt(i+4,4),t=o.getInteger24At(i+16+1,!0);if(t=u[t],"trkn"==e)var A={track:o.getShortAt(i+16+10,!0),total:o.getShortAt(i+16+14,!0)};else if("disk"==e)A={disk:o.getShortAt(i+16+10,!0),total:o.getShortAt(i+16+14,!0)};else{i+=24;var r=K-24;switch("covr"===e&&"uint8"===t&&(t="jpeg"),t){case"text":A=o.getStringWithCharsetAt(i,r,"utf-8").toString();break;case"uint8":A=o.getShortAt(i,!1);break;case"int":case"uint":A=("int"==t?1==r?o.getSByteAt:2==r?o.getSShortAt:4==r?o.getSLongAt:o.getLongAt:1==r?o.getByteAt:2==r?o.getShortAt:o.getLongAt).call(o,i+(8==r?4:0),!0);break;case"jpeg":case"png":A={format:"image/"+t,data:o.getBytesAt(i,r)}}}return{id:e,size:K,description:c[e]||"Unknown",data:A}}},{key:"getShortcuts",value:function(){return C}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(o){return"ftyp"===String.fromCharCode.apply(String,o.slice(4,8))}}]),i}(K);var u={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},c={"©alb":"Album","©ART":"Artist",aART:"Album Artist","©day":"Release Date","©nam":"Title","©gen":"Genre",gnre:"Genre",trkn:"Track Number","©wrt":"Composer","©too":"Encoding Tool","©enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","©grp":"Grouping",keyw:"Keywords","©lyr":"Lyrics","©cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},C={title:"©nam",artist:"©ART",album:"©alb",year:"©day",comment:"©cmt",track:"trkn",genre:"©gen",picture:"covr",lyrics:"©lyr"};i.exports=o},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(o,i,K){function e(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function t(o,i,K){return i&&e(o.prototype,i),K&&e(o,K),o}function A(o,i,K){return i in o?Object.defineProperty(o,i,{value:K,enumerable:!0,configurable:!0,writable:!0}):o[i]=K,o}var r=o("./StringUtils");o=function(){function o(i){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");A(this,"_isInitialized",void 0),A(this,"_size",void 0),this._isInitialized=!1,this._size=0}return t(o,[{key:"init",value:function(o){var i=this;if(!this._isInitialized)return this._init({onSuccess:function(){i._isInitialized=!0,o.onSuccess()},onError:o.onError});setTimeout(o.onSuccess,1)}},{key:"_init",value:function(o){throw Error("Must implement init function")}},{key:"loadRange",value:function(o,i){throw Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(o){throw Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(o,i){for(var K=Array(i),e=0;e<i;e++)K[e]=this.getByteAt(o+e);return K}},{key:"isBitSetAt",value:function(o,i){return 0!=(this.getByteAt(o)&1<<i)}},{key:"getSByteAt",value:function(o){return 127<(o=this.getByteAt(o))?o-256:o}},{key:"getShortAt",value:function(o,i){return 0>(o=i?(this.getByteAt(o)<<8)+this.getByteAt(o+1):(this.getByteAt(o+1)<<8)+this.getByteAt(o))&&(o+=65536),o}},{key:"getSShortAt",value:function(o,i){return 32767<(o=this.getShortAt(o,i))?o-65536:o}},{key:"getLongAt",value:function(o,i){var K=this.getByteAt(o),e=this.getByteAt(o+1),t=this.getByteAt(o+2);return o=this.getByteAt(o+3),0>(i=i?(((K<<8)+e<<8)+t<<8)+o:(((o<<8)+t<<8)+e<<8)+K)&&(i+=4294967296),i}},{key:"getSLongAt",value:function(o,i){return 2147483647<(o=this.getLongAt(o,i))?o-4294967296:o}},{key:"getInteger24At",value:function(o,i){var K=this.getByteAt(o),e=this.getByteAt(o+1);return o=this.getByteAt(o+2),0>(i=i?((K<<8)+e<<8)+o:((o<<8)+e<<8)+K)&&(i+=16777216),i}},{key:"getStringAt",value:function(o,i){for(var K=[],e=o,t=0;e<o+i;e++,t++)K[t]=String.fromCharCode(this.getByteAt(e));return K.join("")}},{key:"getStringWithCharsetAt",value:function(o,i,K){switch(o=this.getBytesAt(o,i),(K||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":K=r.readUTF16String(o,"utf-16be"===K);break;case"utf-8":K=r.readUTF8String(o);break;default:K=r.readNullTerminatedString(o)}return K}},{key:"getCharAt",value:function(o){return String.fromCharCode(this.getByteAt(o))}},{key:"getSynchsafeInteger32At",value:function(o){var i=this.getByteAt(o),K=this.getByteAt(o+1),e=this.getByteAt(o+2);return 127&this.getByteAt(o+3)|(127&e)<<7|(127&K)<<14|(127&i)<<21}}],[{key:"canReadFile",value:function(o){throw Error("Must implement canReadFile function")}}]),o}(),i.exports=o},{"./StringUtils":13}],12:[function(o,i,K){function e(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function t(o,i,K){return i&&e(o.prototype,i),K&&e(o,K),o}function A(o,i,K){return i in o?Object.defineProperty(o,i,{value:K,enumerable:!0,configurable:!0,writable:!0}):o[i]=K,o}o("./MediaFileReader"),o=function(){function o(i){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");A(this,"_mediaFileReader",void 0),A(this,"_tags",void 0),this._mediaFileReader=i,this._tags=null}return t(o,[{key:"setTagsToRead",value:function(o){return this._tags=o,this}},{key:"read",value:function(o){var i=this;this._mediaFileReader.init({onSuccess:function(){i._loadData(i._mediaFileReader,{onSuccess:function(){try{var K=i._parseData(i._mediaFileReader,i._tags)}catch(e){if(o.onError)return void o.onError({type:"parseData",info:e.message})}o.onSuccess(K)},onError:o.onError})},onError:o.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(o,i){throw Error("Must implement _loadData function")}},{key:"_parseData",value:function(o,i){throw Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(o){if(!o)return null;for(var i,K=[],e=this.getShortcuts(),t=0;i=o[t];t++)K=K.concat(e[i]||[i]);return K}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement")}},{key:"canReadTagFormat",value:function(o){throw Error("Must implement")}}]),o}(),i.exports=o},{"./MediaFileReader":11}],13:[function(o,i,K){function e(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function t(o,i,K){return i&&e(o.prototype,i),K&&e(o,K),o}function A(o,i,K){return i in o?Object.defineProperty(o,i,{value:K,enumerable:!0,configurable:!0,writable:!0}):o[i]=K,o}var r=function(){function o(i,K){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");A(this,"_value",void 0),A(this,"bytesReadCount",void 0),A(this,"length",void 0),this._value=i,this.bytesReadCount=K,this.length=i.length}return t(o,[{key:"toString",value:function(){return this._value}}]),o}();i.exports={readUTF16String:function(o,i,K){var e=0,t=1,A=0;K=Math.min(K||o.length,o.length),254==o[0]&&255==o[1]?(i=!0,e=2):255==o[0]&&254==o[1]&&(i=!1,e=2),i&&(t=0,A=1),i=[];for(var n=0;e<K;n++){var a=o[e+t],g=(a<<8)+o[e+A];if(e+=2,0==g)break;216>a||224<=a?i[n]=String.fromCharCode(g):(a=(o[e+t]<<8)+o[e+A],e+=2,i[n]=String.fromCharCode(g,a))}return new r(i.join(""),e)},readUTF8String:function(o,i){var K=0;i=Math.min(i||o.length,o.length),239==o[0]&&187==o[1]&&191==o[2]&&(K=3);for(var e=[],t=0;K<i;t++){var A=o[K++];if(0==A)break;if(128>A)e[t]=String.fromCharCode(A);else if(194<=A&&224>A){var n=o[K++];e[t]=String.fromCharCode(((31&A)<<6)+(63&n))}else if(224<=A&&240>A){n=o[K++];var a=o[K++];e[t]=String.fromCharCode(((255&A)<<12)+((63&n)<<6)+(63&a))}else 240<=A&&245>A&&(a=((7&A)<<18)+((63&(n=o[K++]))<<12)+((63&(a=o[K++]))<<6)+(63&o[K++])-65536,e[t]=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return new r(e.join(""),K)},readNullTerminatedString:function(o,i){var K=[];i=i||o.length;for(var e=0;e<i;){var t=o[e++];if(0==t)break;K[e-1]=String.fromCharCode(t)}return new r(K.join(""),e)}}},{}],14:[function(o,i,K){function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function t(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function A(o,i,K){return i&&t(o.prototype,i),K&&t(o,K),o}function r(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),i&&n(o,i)}function n(o,i){return(n=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(o,i)}function a(o){var i=s();return function(){var K=u(o);if(i){var t=u(this).constructor;K=Reflect.construct(K,arguments,t)}else K=K.apply(this,arguments);return K=!K||"object"!==e(K)&&"function"!=typeof K?g(this):K}}function g(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function s(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(o){return!1}}function u(o){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function c(o,i,K){return i in o?Object.defineProperty(o,i,{value:K,enumerable:!0,configurable:!0,writable:!0}):o[i]=K,o}var C=o("./ChunkedFileData");K=function(i){function K(o){if(!(this instanceof K))throw new TypeError("Cannot call a class as a function");var i=e.call(this);return c(g(i),"_url",void 0),c(g(i),"_fileData",void 0),i._url=o,i._fileData=new C,i}r(K,i);var e=a(K);return A(K,[{key:"_init",value:function(o){K._config.avoidHeadRequests?this._fetchSizeWithGetRequest(o):this._fetchSizeWithHeadRequest(o)}},{key:"_fetchSizeWithHeadRequest",value:function(o){var i=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(K){(K=i._parseContentLength(K))?(i._size=K,o.onSuccess()):i._fetchSizeWithGetRequest(o)},onError:o.onError})}},{key:"_fetchSizeWithGetRequest",value:function(o){var i=this,K=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",K,{onSuccess:function(K){var e=i._parseContentRange(K);if(K=i._getXhrResponseContent(K),e){if(null==e.instanceLength)return void i._fetchEntireFile(o);i._size=e.instanceLength}else i._size=K.length;i._fileData.addData(0,K),o.onSuccess()},onError:o.onError})}},{key:"_fetchEntireFile",value:function(o){var i=this;this._makeXHRRequest("GET",null,{onSuccess:function(K){K=i._getXhrResponseContent(K),i._size=K.length,i._fileData.addData(0,K),o.onSuccess()},onError:o.onError})}},{key:"_getXhrResponseContent",value:function(o){return o.responseBody||o.responseText||""}},{key:"_parseContentLength",value:function(o){return null==(o=this._getResponseHeader(o,"Content-Length"))?o:parseInt(o,10)}},{key:"_parseContentRange",value:function(o){if(o=this._getResponseHeader(o,"Content-Range")){var i=o.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!i)throw Error("FIXME: Unknown Content-Range syntax: "+o);return{firstBytePosition:parseInt(i[1],10),lastBytePosition:parseInt(i[2],10),instanceLength:i[3]?parseInt(i[3],10):null}}return null}},{key:"loadRange",value:function(o,i){var K=this;K._fileData.hasDataRange(o[0],Math.min(K._size,o[1]))?setTimeout(i.onSuccess,1):((o=this._roundRangeToChunkMultiple(o))[1]=Math.min(K._size,o[1]),this._makeXHRRequest("GET",o,{onSuccess:function(e){e=K._getXhrResponseContent(e),K._fileData.addData(o[0],e),i.onSuccess()},onError:i.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(o){return[o[0],o[0]+1024*Math.ceil((o[1]-o[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(o,i,e){var t=this._createXHRObject();t.open(o,this._url);var A=function(){200===t.status||206===t.status?e.onSuccess(t):e.onError&&e.onError({type:"xhr",info:"Unexpected HTTP status "+t.status+".",xhr:t}),t=null};void 0!==t.onload?(t.onload=A,t.onerror=function(){e.onError&&e.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:t})}):t.onreadystatechange=function(){4===t.readyState&&A()},K._config.timeoutInSec&&(t.timeout=1e3*K._config.timeoutInSec,t.ontimeout=function(){e.onError&&e.onError({type:"xhr",info:"Timeout after "+t.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:t})}),t.overrideMimeType("text/plain; charset=x-user-defined"),i&&this._setRequestHeader(t,"Range","bytes="+i[0]+"-"+i[1]),this._setRequestHeader(t,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),t.send(null)}},{key:"_setRequestHeader",value:function(o,i,e){0>K._config.disallowedXhrHeaders.indexOf(i.toLowerCase())&&o.setRequestHeader(i,e)}},{key:"_hasResponseHeader",value:function(o,i){if(!(o=o.getAllResponseHeaders()))return!1;o=o.split("\r\n");for(var K=[],e=0;e<o.length;e++)K[e]=o[e].split(":")[0].toLowerCase();return 0<=K.indexOf(i.toLowerCase())}},{key:"_getResponseHeader",value:function(o,i){return this._hasResponseHeader(o,i)?o.getResponseHeader(i):null}},{key:"getByteAt",value:function(o){return 255&this._fileData.getByteAt(o).charCodeAt(0)}},{key:"_isWebWorker",value:function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window&&!this._isWebWorker())return new(o("xhr2").XMLHttpRequest);if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;throw Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(o){return"string"==typeof o&&/^[a-z]+:\/\//i.test(o)}},{key:"setConfig",value:function(o){for(var i in o)o.hasOwnProperty(i)&&(this._config[i]=o[i]);for(o=this._config.disallowedXhrHeaders,i=0;i<o.length;i++)o[i]=o[i].toLowerCase()}}]),K}(o("./MediaFileReader")),c(K,"_config",void 0),K._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},i.exports=K},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(o,i,K){function e(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function t(o,i){for(var K=0;K<i.length;K++){var e=i[K];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function A(o,i,K){return i&&t(o.prototype,i),K&&t(o,K),o}function r(o,i,K){return i in o?Object.defineProperty(o,i,{value:K,enumerable:!0,configurable:!0,writable:!0}):o[i]=K,o}function n(o,i){var K=0>o.offset&&(-o.offset>i||0<o.offset+o.length);return!(0<=o.offset&&o.offset+o.length>=i||K)}o("./MediaFileReader");var a=o("./XhrFileReader"),g=o("./BlobFileReader"),s=o("./ArrayFileReader");o("./MediaTagReader");var u=o("./ID3v1TagReader"),c=o("./ID3v2TagReader"),C=o("./MP4TagReader"),l=o("./FLACTagReader"),f=[],d=[],y=function(){function o(i){e(this,o),r(this,"_file",void 0),r(this,"_tagsToRead",void 0),r(this,"_fileReader",void 0),r(this,"_tagReader",void 0),this._file=i}return A(o,[{key:"setTagsToRead",value:function(o){return this._tagsToRead=o,this}},{key:"setFileReader",value:function(o){return this._fileReader=o,this}},{key:"setTagReader",value:function(o){return this._tagReader=o,this}},{key:"read",value:function(o){var i=new(this._getFileReader())(this._file),K=this;i.init({onSuccess:function(){K._getTagReader(i,{onSuccess:function(e){new e(i).setTagsToRead(K._tagsToRead).read(o)},onError:o.onError})},onError:o.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var o=0;o<f.length;o++)if(f[o].canReadFile(this._file))return f[o];throw Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(o,i){if(this._tagReader){var K=this._tagReader;setTimeout((function(){i.onSuccess(K)}),1)}else this._findTagReader(o,i)}},{key:"_findTagReader",value:function(o,i){for(var K=[],e=[],t=o.getSize(),A=0;A<d.length;A++){var r=d[A].getTagIdentifierByteRange();n(r,t)&&(0<=r.offset&&r.offset<t/2||0>r.offset&&r.offset<-t/2?K.push(d[A]):e.push(d[A]))}var a=!1;A={onSuccess:function(){if(a){for(var K=0;K<d.length;K++){var e=d[K].getTagIdentifierByteRange();if(n(e,t)){try{var A=o.getBytesAt(0<=e.offset?e.offset:e.offset+t,e.length)}catch(r){return void(i.onError&&i.onError({type:"fileReader",info:r.message}))}if(d[K].canReadTagFormat(A))return void i.onSuccess(d[K])}}i.onError&&i.onError({type:"tagFormat",info:"No suitable tag reader found"})}else a=!0},onError:i.onError},this._loadTagIdentifierRanges(o,K,A),this._loadTagIdentifierRanges(o,e,A)}},{key:"_loadTagIdentifierRanges",value:function(o,i,K){if(0===i.length)setTimeout(K.onSuccess,1);else{for(var e=[Number.MAX_VALUE,0],t=o.getSize(),A=0;A<i.length;A++){var r=i[A].getTagIdentifierByteRange(),n=0<=r.offset?r.offset:r.offset+t;r=n+r.length-1,e[0]=Math.min(n,e[0]),e[1]=Math.max(r,e[1])}o.loadRange(e,K)}}}]),o}();(K=function(){function o(){e(this,o)}return A(o,null,[{key:"addFileReader",value:function(i){return f.push(i),o}},{key:"addTagReader",value:function(i){return d.push(i),o}},{key:"removeTagReader",value:function(i){return 0<=(i=d.indexOf(i))&&d.splice(i,1),o}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){a.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(o){a.setConfig({disallowedXhrHeaders:o})}},{key:"setXhrTimeoutInSec",value:function(o){a.setConfig({timeoutInSec:o})}}]),o}()).addFileReader(a).addFileReader(g).addFileReader(s).addTagReader(c).addTagReader(u).addTagReader(C).addTagReader(l),"undefined"==typeof process||process.browser||(o="undefined"!=typeof navigator&&"ReactNative"===navigator.product?o("./ReactNativeFileReader"):o("./NodeFileReader"),K.addFileReader(o)),i.exports={read:function(o,i){new y(o).read(i)},Reader:y,Config:K}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./ReactNativeFileReader":1,"./XhrFileReader":14}]},{},[15])(15);var y=d.exports;const p=o=>{const i=(o-o%60)/60,K=o-60*i;return(i<=0?"00":i<10?"0"+i:i)+":"+(K<=0?"00":K<10?"0"+K:K)},h=async o=>{const i=Object.keys(o),K=Math.floor(Math.random()*i.length),e=o[i[K]],t=await fetch(e).then((o=>o.blob()));return{metadata:await new Promise(((o,i)=>y.read(t,{onSuccess:async i=>{const K=i.tags.APIC.data.data,e=new Uint8Array(K),t=await(async o=>{const i=await new Promise((i=>{const K=new FileReader;K.onload=()=>i(K.result),K.readAsDataURL(new Blob([o]))}));return i.slice(i.indexOf(",")+1)})(e),A=`data:image/jpeg;base64,${t}`,r=i.tags.title||"Unknown Song",n=i.tags.artist||"Unknown Artist",a=i.tags.album||"Unknown Album";o({title:r,artist:n,album:a,cover:A})},onError:o=>i(o)}))),data:URL.createObjectURL(t),index:K,tracks:i.length}},m=()=>{t.play(),r.innerHTML="Pause"},v=()=>{t.pause(),r.innerHTML="Play"},b=()=>{t.paused?m():v()},S=async o=>{const{data:i,index:K,metadata:r,tracks:n}=await h(o),a=await(async o=>{const i=new Image;return i.src=o,await i.decode(),i})(r.cover),g=a.naturalWidth,s=a.naturalHeight;e.innerHTML="Now playing: "+r.title+" - "+r.album+" ("+K+" of "+n+")",A.src=r.cover,t.src=i,m(),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:r.title,album:r.album,artist:r.artist,artwork:[{src:r.cover,sizes:`${g}x${s}`,type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",m),navigator.mediaSession.setActionHandler("pause",v),navigator.mediaSession.setActionHandler("stop",(()=>{v(),t.currentTime=0})),navigator.mediaSession.setActionHandler("previoustrack",(()=>{t.currentTime<=0?S(o):t.currentTime=0})),navigator.mediaSession.setActionHandler("nexttrack",(()=>S(o))),navigator.mediaSession.setActionHandler("seekforward",(o=>{const i=o.seekOffset||5;t.currentTime+=i})),navigator.mediaSession.setActionHandler("seekbackward",(o=>{const i=o.seekOffset||5;t.currentTime-=i})),navigator.mediaSession.setActionHandler("seekto",(o=>{o.fastSeek&&"fastSeek"in t?t.fastSeek(o.seekTime):t.currentTime=o.seekTime})))},R=((o={})=>(K.addEventListener("change",(async()=>{for(const i of Object.keys(o))URL.revokeObjectURL(o[i]),delete o[i];for(let i=0;i<K.files.length;i++){const t=K.files[i];if(!t.name.endsWith(".mp3")&&!t.name.endsWith(".ogg")&&!t.name.endsWith(".wav"))continue;e.innerHTML=`Processing ${i+1} of ${K.files.length}: ${t.name}`;const A=URL.createObjectURL(t);o[t.name]=A}e.innerHTML="Processing complete!",await S(o)})),t.addEventListener("timeupdate",(()=>{const o=t.currentTime,i=t.duration;if(Number.isNaN(o)||Number.isNaN(i))return;const K=((o,i)=>o/i*100)(o,i).toFixed(2);g.style.width=K+"%",n.innerHTML=p(Math.floor(o)),s.innerHTML="-"+p(Math.floor(i-o))})),o))();var T;T=R,window.addEventListener("keydown",(o=>{switch(o.code){case"Space":b();break;case"ArrowRight":t.currentTime+=5;break;case"ArrowLeft":t.currentTime-=5;break;case"KeyN":o.shiftKey&&S(T)}})),t.addEventListener("ended",(()=>S(T))),u.addEventListener("click",(()=>S(T))),r.addEventListener("click",b);</script><style>html,body{width:100%;height:100%;margin:0;padding:0;color:#fff;background-color:#1f2120;font-family:Verdana}body{display:flex;flex-direction:column;justify-content:center;align-items:center}input{font-family:Verdana}.status{font-size:12pt;margin:2rem}.control{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:center}#progress{width:40%;height:1rem;background-color:#7e7e7e;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;margin:0 1.5rem;border-radius:4px}#progressInner{background-color:#4c4cec;width:1%;height:100%;border-radius:4px}.controller{padding:.4% .6%;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:pointer;border:1px solid white;outline:none;-webkit-user-select:none;user-select:none;transition:color .25s ease,background-color .25s ease}.controller:hover{background-color:#fff;color:#1f2120}#coverArt{height:30rem}</style></head><body></body></html>